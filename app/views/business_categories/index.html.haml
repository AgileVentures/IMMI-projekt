%header.entry-header
  %h1.entry-title= t('.title')
.entry-content
  .table-responsive
    %table.table.table-hover.table-sm#business_categories
      = render 'cat_table_head', parent_cat_id: nil

      %tbody
        - @business_categories.roots.each do |business_category|

          = render 'category_display_row',
                   business_category: business_category,
                   context: 'category',
                   parent_cat_id: business_category.id

          - if business_category.children?

            = render 'subcategories_display_row',
                     business_category: business_category

  -#           %tr{ id: "subcategories-for-#{business_category.id}" }
  -#             %td{ colspan: 5 }
  -#               %table.table.table-hover.table-sm
  -#                 = render 'cat_table_head', parent_cat_id: business_category.id
  -#
  -#                 %tbody
  -#                   - business_category.children.each do |subcategory|
  -#
  -#                     = render 'category_display_row',
  -#                              business_category: subcategory,
  -#                              context: 'subcategory',
  -#                              parent_cat_id: business_category.id
  %hr
    .text-center
      = link_to t('business_categories.new.title'),
                new_business_category_path,
                remote: true,
                class: 'btn btn-sm btn-light new-category-button'

:javascript
  $(document).ready(categories.init);
